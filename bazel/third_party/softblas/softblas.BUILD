# FILEPATH: /home/neal/lagoon/vere/bazel/third_party/softblas/softblas.BUILD

load("@bazel_tools//tools/build_defs/repo:http.bzl", "http_archive")

cc_library(
    name = "softblas",
    visibility = ["//visibility:public"],
    deps = select({
        "@platforms//cpu:aarch64": [":softblas_aarch64"],
        "@platforms//cpu:x86_64": [":softblas_x86_64"],
        "//conditions:default": [],
    }),
)

cc_library(
    name = "softblas_aarch64",
    visibility = ["//visibility:public"],
    hdrs = ["include/softblas.h"],
    includes = ["include"],
    srcs = [
        "include/softblas.h",
        "src/softblas_state.c",
        "src/blas/level1/sasum.c",
        "src/blas/level1/dasum.c",
        "src/blas/level1/hasum.c",
        "src/blas/level1/qasum.c",
        "src/blas/level1/saxpy.c",
        "src/blas/level1/daxpy.c",
        "src/blas/level1/haxpy.c",
        "src/blas/level1/qaxpy.c",
        "src/blas/level1/scopy.c",
        "src/blas/level1/dcopy.c",
        "src/blas/level1/hcopy.c",
        "src/blas/level1/qcopy.c",
        "src/blas/level1/sdot.c",
        "src/blas/level1/ddot.c",
        "src/blas/level1/hdot.c",
        "src/blas/level1/qdot.c",
        "src/blas/level1/snrm2.c",
        "src/blas/level1/dnrm2.c",
        "src/blas/level1/hnrm2.c",
        "src/blas/level1/qnrm2.c",
        "src/blas/level1/sscal.c",
        "src/blas/level1/dscal.c",
        "src/blas/level1/hscal.c",
        "src/blas/level1/qscal.c",
        "src/blas/level1/sswap.c",
        "src/blas/level1/dswap.c",
        "src/blas/level1/hswap.c",
        "src/blas/level1/qswap.c",
        "src/blas/level1/isamax.c",
        "src/blas/level1/idamax.c",
        "src/blas/level1/ihamax.c",
        "src/blas/level1/iqamax.c",
        "src/blas/level2/sgemv.c",
        "src/blas/level2/dgemv.c",
        "src/blas/level2/hgemv.c",
        "src/blas/level2/qgemv.c",
        "src/blas/level3/sgemm.c",
        "src/blas/level3/dgemm.c",
        "src/blas/level3/hgemm.c",
        "src/blas/level3/qgemm.c"
    ],
    deps = ["@softfloat"],
)

cc_library(
    name = "softblas_x86_64",
    visibility = ["//visibility:public"],
    hdrs = ["include/softblas.h"],
    includes = ["include"],
    srcs = [
        "include/softblas.h",
        "src/softblas_state.c",
        "src/blas/level1/sasum.c",
        "src/blas/level1/dasum.c",
        "src/blas/level1/hasum.c",
        "src/blas/level1/qasum.c",
        "src/blas/level1/saxpy.c",
        "src/blas/level1/daxpy.c",
        "src/blas/level1/haxpy.c",
        "src/blas/level1/qaxpy.c",
        "src/blas/level1/scopy.c",
        "src/blas/level1/dcopy.c",
        "src/blas/level1/hcopy.c",
        "src/blas/level1/qcopy.c",
        "src/blas/level1/sdot.c",
        "src/blas/level1/ddot.c",
        "src/blas/level1/hdot.c",
        "src/blas/level1/qdot.c",
        "src/blas/level1/snrm2.c",
        "src/blas/level1/dnrm2.c",
        "src/blas/level1/hnrm2.c",
        "src/blas/level1/qnrm2.c",
        "src/blas/level1/sscal.c",
        "src/blas/level1/dscal.c",
        "src/blas/level1/hscal.c",
        "src/blas/level1/qscal.c",
        "src/blas/level1/sswap.c",
        "src/blas/level1/dswap.c",
        "src/blas/level1/hswap.c",
        "src/blas/level1/qswap.c",
        "src/blas/level1/isamax.c",
        "src/blas/level1/idamax.c",
        "src/blas/level1/ihamax.c",
        "src/blas/level1/iqamax.c",
        "src/blas/level2/sgemv.c",
        "src/blas/level2/dgemv.c",
        "src/blas/level2/hgemv.c",
        "src/blas/level2/qgemv.c",
        "src/blas/level3/sgemm.c",
        "src/blas/level3/dgemm.c",
        "src/blas/level3/hgemm.c",
        "src/blas/level3/qgemm.c"
    ],
    deps = ["@softfloat"],
)
